<!DOCTYPE html>
<html lang="id">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue Demo</title>
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	<!-- header include (dynamically copied from header.html) -->
	<header>
		<nav class="tabs" role="navigation" aria-label="Demo tabs">
			<a class="tab" href="index.html" data-tab="native">Native</a>
			<a class="tab" href="jquery.html" data-tab="jquery">JQuery</a>
			<a class="tab" href="vue.html" data-tab="vue">Vue</a>
		</nav>
	</header>

	<style>
		/* Simple tab styles */
		.tabs { display:flex; gap:8px; padding:12px; background:#f7f7f8; border-bottom:1px solid #e0e0e0; }
		.tab { display:inline-block; padding:8px 14px; text-decoration:none; color:#333; border-radius:6px 6px 0 0; background:transparent; transition: background .12s ease, color .12s ease; border:1px solid transparent; }
		.tab:hover { background:#f0f0f0; }
		.tab.active { background:white; color:#111; border-color:#e0e0e0; border-bottom-color:white; box-shadow:0 1px 0 rgba(0,0,0,0.03); }
		body { margin:0; }
	</style>

	<main class="container py-4">
		<h1>Vue</h1>
		<section id="todo-app-vue" aria-label="Todo app (Vue)">
			<form @submit.prevent="add" class="mb-3" style="max-width:720px;">
				<div class="row g-2 align-items-center">
					<div class="col-auto" style="width:180px;">
						<input id="todo-label" v-model="newTodo.label" type="text" class="form-control" placeholder="Label (mis. Urgent)" />
					</div>
					<div class="col">
						<input id="todo-input" v-model="newTodo.title" type="text" class="form-control" placeholder="Judul tugas..." autocomplete="off" />
					</div>
				</div>
				<div class="mt-2">
					<textarea id="todo-desc" v-model="newTodo.description" class="form-control" placeholder="Deskripsi (opsional)" rows="2"></textarea>
				</div>
				<div class="row g-2 mt-2">
					<div class="col-auto">
						<input id="todo-start" v-model="newTodo.startDate" type="date" class="form-control" />
					</div>
					<div class="col-auto">
						<input id="todo-due" v-model="newTodo.dueDate" type="date" class="form-control" />
					</div>
					<div class="col-auto" style="width:160px;">
						<select id="todo-status" v-model="newTodo.status" class="form-select">
							<option value="todo">Todo</option>
							<option value="in-progress">In Progress</option>
							<option value="done">Done</option>
						</select>
					</div>
					<div class="col-auto">
						<button type="submit" class="btn btn-primary">Tambah</button>
					</div>
				</div>
			</form>

			<div id="todo-controls" class="d-flex gap-2 align-items-center flex-wrap mt-3">
				<span class="me-2">{{ count }} tugas</span>
				<button type="button" class="btn btn-outline-secondary btn-sm" @click="clearCompleted">Hapus yang selesai</button>
				<button type="button" class="btn btn-outline-danger btn-sm" @click="clearAll">Hapus semua</button>
			</div>

			<ul id="todo-list" class="list-group mt-3" style="max-width:720px;">
				<li v-for="todo in todosSorted" :key="todo.id" :data-id="todo.id" class="list-group-item">
					<div class="d-flex align-items-center gap-2">
						<input type="checkbox" v-model="todo.completed" @change="toggle(todo)" class="form-check-input me-2" />
						<div class="d-flex align-items-center gap-2 flex-grow-1">
							<span v-if="todo.label" class="badge bg-info text-dark ms-2">{{ todo.label }}</span>
							<span v-if="editingId !== todo.id" @dblclick="startEdit(todo)" :style="{ textDecoration: todo.completed ? 'line-through' : 'none', cursor: 'pointer' }">{{ todo.title || '(tanpa judul)' }}</span>
						</div>
						<div>
							<button type="button" class="btn btn-sm btn-outline-secondary" @click="startEdit(todo)">Edit</button>
							<button type="button" class="btn btn-sm btn-outline-danger" @click="remove(todo.id)">Hapus</button>
						</div>
					</div>
					<div v-if="todo.description" class="mb-1 text-muted">{{ todo.description }}</div>
					<div class="small text-muted">
						<span v-if="todo.startDate" class="me-3">Start: {{ todo.startDate }}</span>
						<span v-if="todo.dueDate" class="me-3">Due: {{ todo.dueDate }}</span>
						<span v-if="todo.status">Status: {{ todo.status }}</span>
					</div>

					<!-- inline editor -->
					<div v-if="editingId === todo.id" class="mt-2">
						<div class="mb-2">
							<input v-model="editingDraft.title" class="form-control" />
						</div>
						<div class="mb-2 row g-2">
							<div class="col">
								<input v-model="editingDraft.label" class="form-control" placeholder="Label (mis. Urgent)" />
							</div>
						</div>
						<div class="mb-2">
							<textarea v-model="editingDraft.description" class="form-control" rows="3"></textarea>
						</div>
						<div class="d-flex gap-2 mb-2">
							<input v-model="editingDraft.startDate" type="date" class="form-control" style="width:auto" />
							<input v-model="editingDraft.dueDate" type="date" class="form-control" style="width:auto" />
							<select v-model="editingDraft.status" class="form-select" style="width:160px">
								<option value="todo">Todo</option>
								<option value="in-progress">In Progress</option>
								<option value="done">Done</option>
							</select>
						</div>
						<div class="d-flex gap-2">
							<button class="btn btn-sm btn-primary" @click="finishEdit(todo)">Simpan</button>
							<button class="btn btn-sm btn-secondary" @click="cancelEdit">Batal</button>
						</div>
					</div>
				</li>
			</ul>
		</section>
	</main>

	<!-- Vue 3 + local storage API -->
	<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
	<script src="script.js"></script>
	<script src="local.js"></script>
	<script src="vue.js"></script>

	<!-- Bootstrap JS bundle (optional) -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>